{"openapi":"3.0.1","info":{"title":"Kiddo APP","description":"Backend for the Kiddo English Club mobile application.","version":"1.0.0"},"tags":[{"name":"Kiddo"},{"name":"Kiddo/Score"},{"name":"Kiddo/Theme"},{"name":"Kiddo/Accounts"},{"name":"Kiddo/Children"},{"name":"Kiddo/Files"}],"paths":{"/api/scores/":{"post":{"summary":"Add score","deprecated":false,"description":"Adds score data related to a theme. It recalculates the score.","tags":["Kiddo/Score"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"theme_id":{"type":"string","format":"uuid"},"guest_id":{"type":"string","format":"uuid"},"points":{"type":"integer","minimum":0,"maximum":100},"time":{"type":"number","minimum":0,"exclusiveMinimum":true,"maximum":300}},"required":["theme_id","points","time","guest_id"]}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Score"}}}},"400":{"description":"ValidationError","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"anyOf":[{"type":"object","additionalProperties":false},{"type":"string"}]},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"validation_error","message":[{"ctx":{"reason":"The email address is not valid. It must have exactly one @-sign."},"input":"Merl.Huel@example.net@","loc":["email"],"msg":"value is not a valid email address: The email address is not valid. It must have exactly one @-sign.","type":"value_error"}]}},"2":{"summary":"Exception","value":{"error":"validation_error","message":"Name must contain only alphabetic characters: Isidro1"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"404":{"description":"Notfound","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"not_found","message":"Not found"}}}}}},"x-400:InvalidToken":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}}},"security":[{"bearer":[]}]}},"/api/themes/":{"get":{"summary":"Get all themes","deprecated":false,"description":"Returns a list of all existing themes.","tags":["Kiddo/Theme"],"parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Theme"}}}}},"400":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}}},"security":[{"bearer":[]}]}},"/api/accounts/register":{"post":{"summary":"Register user","deprecated":false,"description":"Creates a user account.","tags":["Kiddo/Accounts"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"first_name":{"type":"string","faker":"name.firstName"},"last_name":{"type":"string","faker":"name.lastName"},"email":{"type":"string","faker":"internet.exampleEmail"},"password":{"type":"string","faker":"internet.password|concat(@)","minLength":8}},"required":["first_name","last_name","email","password"]}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"400":{"description":"ValidationError","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"anyOf":[{"type":"object","additionalProperties":false},{"type":"string"}]},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"validation_error","message":[{"ctx":{"reason":"The email address is not valid. It must have exactly one @-sign."},"input":"Merl.Huel@example.net@","loc":["email"],"msg":"value is not a valid email address: The email address is not valid. It must have exactly one @-sign.","type":"value_error"}]}},"2":{"summary":"Exception","value":{"error":"validation_error","message":"Name must contain only alphabetic characters: Isidro1"}}}}}},"x-400:AlreadyExists":{"description":"AlreadyExists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"already_exists","message":"Already exists"}}}}}}},"security":[]}},"/api/guests/{child_id}":{"get":{"summary":"Get child","deprecated":false,"description":"Gets a child data provided that the user requesting is effectively the owner of that account or is an admin user.","tags":["Kiddo/Children"],"parameters":[{"name":"child_id","in":"path","description":"","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Guest"}}}},"400":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"404":{"description":"Notfound","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"not_found","message":"Not found"}}}}}}},"security":[{"bearer":[]}]}},"/api/validation/token":{"post":{"summary":"Validate token","deprecated":false,"description":"Determine whether a token is a valid. It will return 200 if it's valid, 400 otherwise.","tags":["Kiddo"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"is_valid":{"type":"boolean"}},"required":["is_valid"]}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"title":"","type":"object","properties":{"is_valid":{"type":"boolean"}},"required":["is_valid"]},"examples":{"1":{"summary":"Invalid","value":{"is_valid":false}}}}}}},"security":[]}},"/services/files/{filename}":{"get":{"summary":"Get file","deprecated":false,"description":"Retrieves the content of the specified file.","tags":["Kiddo/Files"],"parameters":[{"name":"filename","in":"path","description":"","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"*/*":{"schema":{"type":"object","properties":{}}}}},"400":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"404":{"description":"Notfound","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"not_found","message":"Not found"}}}}}}},"security":[{"bearer":[]}]}},"/api/scores/report/{child_id}":{"get":{"summary":"Get report","deprecated":false,"description":"Returns a report that includes the themes with higher and lower scores, the average solving time and the average points so far.","tags":["Kiddo/Score"],"parameters":[{"name":"child_id","in":"path","description":"","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Report"}}}},"400":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"404":{"description":"Notfound","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"not_found","message":"Not found"}}}}}}},"security":[{"bearer":[]}]}},"/api/accounts/login":{"post":{"summary":"Login","deprecated":false,"description":"Retrieves an access token given valid email and password.","tags":["Kiddo/Accounts"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"access_token":{"type":"string","description":"JWT generated"},"token_type":{"type":"string"}},"required":["access_token","token_type"]}}}},"400":{"description":"InvalidCredentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_credentials","message":"Invalid credentials"}}}}}}},"security":[]}},"/api/guests/":{"get":{"summary":"List children","deprecated":false,"description":"Gets a list of children data provided that the user requesting it is effectively the owner of those accounts or is an admin user.","tags":["Kiddo/Children"],"parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Guest"}}}}},"400":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}}},"security":[{"bearer":[]}]},"post":{"summary":"Add child","deprecated":false,"description":"Creates a child account in the current user account.","tags":["Kiddo/Children"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Child name"},"image":{"type":"string","description":"image file name"}},"required":["name","image"]}}}},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Guest"}}}},"400":{"description":"ValidationError","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"anyOf":[{"type":"object","additionalProperties":false},{"type":"string"}]},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"validation_error","message":[{"ctx":{"reason":"The email address is not valid. It must have exactly one @-sign."},"input":"Merl.Huel@example.net@","loc":["email"],"msg":"value is not a valid email address: The email address is not valid. It must have exactly one @-sign.","type":"value_error"}]}},"2":{"summary":"Exception","value":{"error":"validation_error","message":"Name must contain only alphabetic characters: Isidro1"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"x-400:InvalidToken":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"x-400:AlreadyExists":{"description":"AlreadyExists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"already_exists","message":"Already exists"}}}}}}},"security":[{"bearer":[]}]}},"/health":{"get":{"summary":"Health check","deprecated":false,"description":"Helping route to determine wether the service is active or not.","tags":["Kiddo"],"parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string"}},"required":["status"]},"examples":{"1":{"summary":"Success","value":{"status":"ok"}}}}}}},"security":[]}},"/api/themes/{theme_id}":{"get":{"summary":"Get theme by id","deprecated":false,"description":"Returns an specific theme identified by the given ID.","tags":["Kiddo/Theme"],"parameters":[{"name":"theme_id","in":"path","description":"","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Theme"}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"404":{"description":"Notfound","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"not_found","message":"Not found"}}}}}}},"security":[{"bearer":[]}]}},"/api/accounts/profile":{"get":{"summary":"Profile","deprecated":false,"description":"Returns the current user account data. It will use the provided token in the request.","tags":["Kiddo/Accounts"],"parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"400":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"404":{"description":"Notfound","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"not_found","message":"Not found"}}}}}}},"security":[{"bearer":[]}]}},"/api/guests/{child_id}/achievements":{"get":{"summary":"Get child achievements","deprecated":false,"description":"Retrieves a list of all achievements completed by an specific child.","tags":["Kiddo/Children"],"parameters":[{"name":"child_id","in":"path","description":"","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Achievement"}}}}},"400":{"description":"InvalidToken","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"invalid_token","message":"Invalid token"}}}}}},"401":{"description":"Unauthenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"unauthenticated","message":"Not authenticated"}}}}}},"403":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"examples":{"1":{"summary":"Exception","value":{"error":"forbidden","message":"Forbidden"}}}}}},"404":{"description":"Notfound","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"error":{"type":"string"}},"required":["error","message"]},"examples":{"1":{"summary":"Exception","value":{"error":"not_found","message":"Not found"}}}}}}},"security":[{"bearer":[]}]}}},"components":{"schemas":{"Error":{"type":"object","properties":{"error":{"type":"string"},"message":{"type":"string"}},"required":["error","message"]},"Report":{"type":"object","properties":{"guest_id":{"type":"string","format":"uuid"},"avg_points":{"type":"number"},"avg_time":{"type":"number"},"top_scores":{"type":"array","items":{"$ref":"#/components/schemas/ReportScoreData"}},"bottom_scores":{"type":"array","items":{"$ref":"#/components/schemas/ReportScoreData"}}},"required":["guest_id","avg_points","avg_time","top_scores","bottom_scores"]},"ReportScoreData":{"type":"object","properties":{"points":{"type":"number"},"time":{"type":"number"},"elements":{"type":"integer"},"theme_name":{"type":"string"}},"required":["points","time","elements","theme_name"]},"Score":{"type":"object","properties":{"guest_id":{"type":"string","format":"uuid"},"points":{"type":"number"},"time":{"type":"number"},"elements":{"type":"integer"},"theme":{"type":"object","properties":{"id":{"type":"string","format":"uuid"}},"required":["id"]}},"required":["guest_id","points","time","elements","theme"]},"Guest":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"host":{"type":"string","format":"uuid"},"name":{"type":"string"},"image":{"type":"string"}},"required":["id","host","name","image"]},"Achievement":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"value":{"type":"number"},"theme":{"type":"string"},"message":{"type":"string"}},"required":["id","value","theme","message"]},"Account":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"account_type":{"type":"string","enum":["user","admin"]},"full_name":{"type":"string"}},"required":["id","first_name","last_name","email","account_type","full_name"]},"Item":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"image":{"type":"string"},"sound":{"type":"string"}},"required":["id","name","image","sound"]},"Theme":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"description":{"type":"string"},"background":{"type":"string"},"image":{"type":"string"},"items":{"type":"array","items":{"$ref":"#/components/schemas/Item"}}},"required":["id","name","description","background","image","items"]}},"securitySchemes":{"bearer":{"type":"http","scheme":"bearer"}}},"servers":[]}